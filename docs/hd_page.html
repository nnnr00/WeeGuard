<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>å¼€ä¸šæ´»åŠ¨ - è§‚çœ‹è§†é¢‘å¾—ç§¯åˆ†</title>
    <!-- å¼•å…¥å®˜æ–¹ SDK -->
    <script src='//libtl.com/sdk.js' data-zone='10489957' data-sdk='show_10489957'></script>
    <style>
        body{font-family:Arial,sans-serif;text-align:center;margin-top:40px;}
        button{font-size:18px;padding:10px 20px;margin-top:15px;background:#4CAF50;color:#fff;border:none;border-radius:4px;cursor:pointer;}
        .counter{margin-top:10px;font-weight:bold;}
        .note{margin-top:15px;color:#555;}
    </style>
</head>
<body>
    <h2>ğŸ‰ å¼€ä¸šç‰¹æƒ Â·è§‚çœ‹è§†é¢‘å¾—ç§¯åˆ†</h2>
    <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è§‚çœ‹ rewarded å¹¿å‘Šï¼Œè§‚çœ‹è‡³ç»“æŸåå³å¯è·å¾—ç§¯åˆ†å¥–åŠ±ã€‚</p>
    <button id="watchBtn">å¼€å§‹è§‚çœ‹</button>
    <div class="counter" id="counter">è§‚çœ‹æ¬¡æ•°ï¼š0/3</div>
    <p><a href="/mid?target=1" style="display:inline-block;margin-top:10px;">è·å–å¯†é’¥</a></p>
    <div class="note">
        æ¯å¤©å¯é€šè¿‡å¤¸å…‹ç½‘ç›˜è·å–å¯†é’¥ã€‚é¡µé¢ä¼š 3 ç§’åè‡ªåŠ¨è·³è½¬è‡³å¯¹åº”çš„å¯†é’¥é“¾æ¥ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
    </div>

    <script>
        const counterEl=document.getElementById('counter');
        const btn=document.getElementById('watchBtn');
        let completed=0;
        function updateCounter(){counterEl.textContent='è§‚çœ‹æ¬¡æ•°ï¼š'+completed+'/3';}
        updateCounter();

        btn.onclick=()=>{ 
            if(completed>=3){
                alert('æ¯å¤©æœ€å¤šå¯è§‚çœ‹ 3 æ¬¡ï¼Œå·²è¾¾ä¸Šé™ï¼');
                return;
            }
            show_10489957('pop').then(()=>{ 
                fetch(`/reward?user_id=${window.Telegram?.WebApp?.initDataUnsafe?.user?.id}`)
                    .then(r=>r.json())
                    .then(d=>{
                        if(d.success){
                            completed++;
                            updateCounter();
                            alert('âœ… è§‚çœ‹å®Œæˆï¼Œå·²è·å¾—ç§¯åˆ†ï¼');
                        }else{
                            alert('âŒ è§‚çœ‹è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·é‡æ–°å°è¯•ã€‚');
                        }
                    })
                    .catch(()=>{alert('âŒ è¯·æ±‚å‡ºé”™ï¼Œè¯·ç¨åé‡è¯•ã€‚');});
            }).catch(()=>{alert('å¹¿å‘ŠåŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•ã€‚');});
        };
    </script>
</body>
</html>
